#!/bin/bash

# https://www.devdungeon.com/content/rebind-caps-lock-key-escapecontrol
dconf write /org/gnome/desktop/input-sources/xkb-options "['caps:ctrl_modifier']"

sudo apt-get update 

sudo apt-get -y install neovim wget curl zathura openssh-server pdftk

xdg-mime default org.pwmt.zathura.desktop application/pdf

echo "## laptop power settings"
sudo apt-get -y install tlp tlp-rdw

echo "## docker"
sudo apt-get -y install docker.io docker-compose && \
	sudo usermod -aG docker $USER

echo "## zsh"
sudo apt install -y zsh powerline fonts-powerline && \
    RUNZSH=no CHSH=no sh -c "$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)" && \
    test -f ~/.zshrc.pre-oh-my-zsh && \
    mv ~/.zshrc.pre-oh-my-zsh ~/.zshrc && \
    chsh -s $(which zsh)

echo "## chrome browser"
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb && \
    sudo dpkg -i google-chrome-stable_current_amd64.deb
sudo apt-get -y -f install && \
    rm google-chrome-stable_current_amd64.deb

echo "## remove stuff"
sudo apt-get purge --auto-remove evolution thunderbird libreoffice-core

echo "## thefuck"
sudo apt-get -y install python3-dev python3-pip python3-setuptools
sudo pip3 install thefuck

echo "## gnome terminal settings"
# https://dimitar.me/how-to-export-import-gnome-terminal-profiles/
# https://gist.github.com/reavon/0bbe99150810baa5623e5f601aa93afc

echo "## slack"
wget https://downloads.slack-edge.com/linux_releases/slack-desktop-4.1.2-amd64.deb && \
	sudo dpkg -i slack-desktop-4.1.2-amd64.deb && \
    sudo apt-get -y -f install && \
	rm slack-desktop-4.1.2-amd64.deb

echo "## PIA and VPN"
wget https://installers.privateinternetaccess.com/download/pia-linux-1.6-03756.run && \
    sh pia-linux-1.6-03756.run && \
    sudo apt-get -y install network-manager-openvpn* && \
    rm pia-linux-1.6-03756.run 

echo "## JabRef"
wget https://builds.jabref.org/master/JabRef-portable_linux.tar.gz && \
    sudo ln -s /usr/local/share/JabRef/bin/JabRef  /usr/local/bin/JabRef && \
    rm JabRef-portable_linux.tar.gz && \
    sudo ln -sf "$HOME/.local/share/applications/JabRef.desktop" /usr/share/applications/.

echo "## vivaldi"
wget -qO- https://repo.vivaldi.com/archive/linux_signing_key.pub | sudo apt-key add - && \
    sudo add-apt-repository 'deb https://repo.vivaldi.com/archive/deb/ stable main' && \
    sudo apt update && sudo apt install vivaldi-stable

echo "## launchers"
dconf write /org/gnome/shell/favorite-apps \
    "['org.gnome.Nautilus.desktop', 'JabRef.desktop', 'piavpn.desktop', 'vivaldi-stable.desktop', 'google-chrome.desktop', 'firefox-esr.desktop', 'slack.desktop', 'org.gnome.Terminal.desktop']"

echo "## gist from commandline"
sudo gem install gist

# zoom, mathpix, caffeine, insync
